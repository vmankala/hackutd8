(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{266:function(t,e,n){},415:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(34),c=n.n(i),o=(n(266),n(31)),s=n(445),u=n(434),l=n(450),d=n(446),f=n(103),j=n(99),p=(n(268),n(45)),b=n(439),h=n(124),m=n(449),g=n(221),x=n(222),O=n(102),v=n(443),y=n(220),w=n(218),S=Object(o.b)({key:"optimizedAlgo",default:!0}),k=Object(o.b)({key:"allRequests",default:[]}),R=Object(o.c)({key:"currentSalesPoints",get:function(t){var e=(0,t.get)(k);if(0===e.length)return null;var n=e.map((function(t){return t.response})),a=e.map((function(t){return t.request})),r=a[a.length-1],i=n[n.length-1];return r.salesPoints.map((function(t){var e=i.find((function(e){return e.salesPointId===t.id}));if(void 0===e)return{salespoint:t,distribution:0};var n=r.gasToSell*e.percent/100;return{salespoint:t,distribution:n}}))}}),M=Object(o.c)({key:"currentGasAvailable",get:function(t){var e=(0,t.get)(k);if(0===e.length)return null;var n=e.map((function(t){return t.request}));return n[n.length-1].gasToSell}}),N=Object(o.c)({key:"lastUpdate",get:function(t){var e=(0,t.get)(k);if(0===e.length)return null;var n=e.map((function(t){return t.request.timestamp}));return Math.max.apply(Math,Object(p.a)(n))}}),A=Object(o.c)({key:"revenue",get:function(t){var e=(0,t.get)(k);return e.map((function(t,n){var a=new Date(t.request.timestamp),r=a.getSeconds();return{dateString:"".concat(a.getMinutes(),":").concat(r<10?"0":"").concat(r),timestamp:a.getTime(),accumRevenue:t.request.totalSales,instantRevenue:0===n?0:e[n].request.totalSales-e[n-1].request.totalSales}}))}}),C=n(13),P=n(436),I=n(437),E=n(447),q=n(438),z=n(11),B=Object(u.a)((function(t){return{container:{width:"100%",marginBottom:t.spacing(2)},flex:{display:"flex",justifyContent:"space-between"}}})),F=r.a.memo((function(){var t=B(),e=r.a.useState(Date.now),n=Object(C.a)(e,2),a=n[0],i=n[1],c=Object(o.d)(S),s=Object(C.a)(c,2),u=s[0],l=s[1],d=Object(o.e)(N);r.a.useEffect((function(){var t=setInterval((function(){i(Date.now())}),1e3);return function(){clearInterval(t)}}));var f=function(){if(null===d)return"Never";var t=Math.max(0,Math.floor((a-d)/1e3));return"".concat(t," Second").concat(1===t?"":"s"," Ago")}();return Object(z.jsxs)("div",{className:t.container,children:[Object(z.jsxs)("div",{className:t.flex,children:[Object(z.jsx)(P.a,{title:"Revenue",subheader:"Last Optimization: ".concat(f)}),Object(z.jsx)(I.a,{control:Object(z.jsx)(E.a,{checked:u,onChange:function(){return l(!u)},name:"checkedB",color:"primary"}),label:"Distribute Gas Optimally"})]}),Object(z.jsx)(q.a,{})]})}));function K(t){return(Math.round(100*t)/100).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function D(t){return Math.round(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var L=Object(u.a)((function(t){return{container:{width:"100%",height:400,display:"grid",gridAutoRows:"min-content auto",gridAutoColumns:"100%",position:"relative"},loadingContainer:{width:200,height:100,position:"absolute",zIndex:1,left:"calc(50% - 100px)",top:"calc(50% - 50px)"},center:{display:"flex",justifyContent:"space-around",paddingTop:t.spacing(1)}}})),$=r.a.memo((function(){var t=L(),e=Object(o.e)(A).filter((function(t){return t.timestamp>Date.now()-12e5})),n=r.a.useMemo((function(){var t=e.map((function(t){return t.accumRevenue}));return 0===t.length?[0,1e3]:[0,Math.round(1.05*Math.max.apply(Math,Object(p.a)(t)))]}),[e]),a=r.a.useMemo((function(){var t=e.map((function(t){return t.instantRevenue}));return 0===t.length?[0,100]:[0,Math.round(2*Math.max.apply(Math,Object(p.a)(t)))]}),[e]),i=e.length<=1;return Object(z.jsxs)("div",{className:t.container,children:[i&&Object(z.jsxs)("div",{className:t.loadingContainer,children:[Object(z.jsx)("div",{className:t.center,children:Object(z.jsx)(b.a,{size:70})}),Object(z.jsx)("div",{className:t.center,children:Object(z.jsx)(f.a,{children:"Revenue Chart Loading"})})]}),Object(z.jsx)(F,{}),Object(z.jsx)("div",{style:{opacity:i?.3:1},children:Object(z.jsx)(h.a,{children:function(t){return Object(z.jsxs)(m.a,{width:t.width,height:t.height,data:e,children:[Object(z.jsx)(g.a,{dataKey:"dateString"}),Object(z.jsx)(x.a,{width:120,label:{offset:10,value:"Cumulative Revenue ($)",angle:-90,position:"insideBottomLeft"},domain:n,yAxisId:"0",orientation:"left",dataKey:"accumRevenue",tickFormatter:function(t){return String(D(Number(t)))}}),Object(z.jsx)(x.a,{width:120,domain:a,yAxisId:"1",orientation:"right",dataKey:"instantRevenue",label:{offset:20,value:"Instant Revenue ($)",angle:90,position:"insideBottomRight"},tickFormatter:function(t){return String(D(Number(t)))}}),Object(z.jsx)(O.a,{formatter:function(t,e){if("instantRevenue"===e)return["$".concat(D(t)),"Instantaneous Revenue"];if("accumRevenue"===e)return["$".concat(D(t)),"Cumulative Revenue"];throw Error("unexpected")}}),Object(z.jsx)(v.a,{stroke:"#f5f5f5"}),Object(z.jsx)(y.a,{yAxisId:"1",dataKey:"instantRevenue",barSize:20,fill:"#413ea0"}),Object(z.jsx)(w.a,{dot:!1,yAxisId:"0",type:"monotone",dataKey:"accumRevenue",stroke:"#ff7300"})]})}})})]})})),G=n(444),T=Object(u.a)((function(t){return{container:{width:400,height:400,margin:t.spacing(2),display:"grid",gridAutoRows:"min-content auto",gridAutoColumns:"100%"},chartContainer:{margin:t.spacing(1)}}})),J=r.a.memo((function(t){var e=t.salesPoint,n=t.distribution,a=T(),r=e.prices;return Object(z.jsxs)(G.a,{raised:!0,className:a.container,children:[Object(z.jsxs)("div",{children:[Object(z.jsx)(P.a,{title:e.name,subheader:"Last Distributed: ".concat(D(n)," MCF")}),Object(z.jsx)(q.a,{})]}),Object(z.jsx)("div",{className:a.chartContainer,children:Object(z.jsx)(h.a,{children:function(t){return Object(z.jsxs)(m.a,{width:t.width-10,height:t.height,data:r,children:[Object(z.jsx)(g.a,{dataKey:"amount",tickFormatter:function(t){return String(D(Number(t)))}}),Object(z.jsx)(x.a,{tickFormatter:function(t){return String(K(Number(t)))},width:80,label:{offset:10,value:"Price ($/MCF)",angle:-90,position:"insideLeft"},yAxisId:"0",orientation:"left",dataKey:"price"}),Object(z.jsx)(O.a,{formatter:function(t,e){if("amount"===e)return["$".concat(D(t)),"Amount of Gas"];if("price"===e)return["$".concat(K(t)),"Price Willing to Pay"];throw Error("unexpected")}}),Object(z.jsx)(v.a,{stroke:"#f5f5f5"}),Object(z.jsx)(w.a,{dot:!1,yAxisId:"0",type:"monotone",dataKey:"price",stroke:"#ff7300"})]})}})})]})})),W=Object(u.a)((function(t){return{container:{width:"100%",marginBottom:t.spacing(2)}}})),U=r.a.memo((function(){var t=W(),e=Object(o.e)(R),n=Object(o.e)(M);return Object(z.jsxs)("div",{className:t.container,children:[Object(z.jsx)(P.a,{title:"Sales Points",subheader:"".concat((e||[]).length," Sales Points | ").concat(D(n||0)," MCF to Sell")}),Object(z.jsx)(q.a,{})]})})),H=Object(u.a)((function(){return{container:{width:"100%",display:"flex",flexWrap:"wrap"}}})),Q=r.a.memo((function(){var t=H(),e=Object(o.e)(R);return e?Object(z.jsxs)("div",{className:t.container,children:[Object(z.jsx)(U,{}),e.map((function(t){return Object(z.jsx)(J,{distribution:t.distribution,salesPoint:t.salespoint},t.salespoint.id)}))]}):null})),V=n(223);function X(t){var e=t.gasToSell,n=[],a=[];t.salesPoints.forEach((function(t){for(var r=Object(V.a)().domain(t.prices.map((function(t){return t.amount}))).range(t.prices.map((function(t){return t.price}))).clamp(!0),i=[],c=[],o=0;o<=e;o+=e/100)i.push(o),c.push(o*r(o));n.push(i),a.push(c)}));var r=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e5,r=n.map((function(t){return t.length})).reduce((function(t,e){return t+e}),0),i=Math.floor(a/r);!function(){var n=i/(t+1.01);t*=n,e=e.map((function(t){return t.map((function(t){return t*n}))})),t=Math.floor(t),e=e.map((function(t){return t.map((function(t){return Math.ceil(t)}))}))}();var c=n.map((function(t){return t.map((function(){return Array(i).fill(null)}))}));function o(t,a,r){if(a>=n.length)return{i:a,j:r,profit:0,next:null};if(r>=n[a].length)return{i:a,j:r,profit:0,next:null};if(null!==c[a][r][t])return c[a][r][t];var i,s=o(t-e[a][r],a+1,0),u=o(t,a,r+1);return i=t-e[a][r]>=0&&s.profit+n[a][r]>=u.profit?{i:a,j:r,profit:s.profit+n[a][r],next:s}:{i:a,j:r,profit:u.profit,next:u},c[a][r][t]=i,i}for(var s=[],u=o(t,0,0);;){var l=u.next;if(!l)break;l.i>u.i&&s.push(u.j),u=l}return s}(e,n,a),i=n.map((function(t,n){return 100*t[r[n]]/e})),c=i.reduce((function(t,e){return t+e}),0);return i[i.length-1]+=100-c,t.salesPoints.map((function(t,e){return{salesPointId:t.id,percent:i[e]}}))}function Y(t){var e=t.salesPoints.length;return t.salesPoints.map((function(t){return{salesPointId:t.id,percent:100/e}}))}function Z(){var t=Object(o.d)(k),e=Object(C.a)(t,2)[1],n=Object(o.d)(S),a=Object(C.a)(n,1)[0],i=r.a.useRef({isOptimized:a});i.current.isOptimized=a,r.a.useEffect((function(){var t=new WebSocket("wss://eog-assessment-server.azurewebsites.net");return t.addEventListener("message",(function(n){if(n.data.startsWith("Error"))Object(j.b)(n.data);else{var a=JSON.parse(n.data),r=function(t){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?Y(t):X(t)}(a,i.current.isOptimized);e((function(t){var e=[].concat(Object(p.a)(t),[{request:a,response:r}]);return e.slice(e.length-1e5)})),t.send(JSON.stringify(r))}})),t.addEventListener("error",(function(t){Object(j.b)(JSON.stringify(t))})),function(){e([]),t.close()}}),[e])}var _=Object(u.a)((function(t){return Object(l.a)({container:{position:"absolute",width:"100%",height:"100%",display:"grid",gridAutoRows:"min-content auto",gridAutoColumns:"100%"},title:{flexGrow:1,textAlign:"left"},body:{padding:t.spacing(2),overflow:"auto"}})}));var tt=function(){var t=_();return Z(),Object(z.jsxs)("div",{className:t.container,children:[Object(z.jsx)(s.a,{position:"static",children:Object(z.jsx)(d.a,{children:Object(z.jsx)(f.a,{variant:"h5",className:t.title,children:"EOG Example Assessment"})})}),Object(z.jsxs)("div",{className:t.body,children:[Object(z.jsx)(j.a,{}),Object(z.jsx)($,{}),Object(z.jsx)(Q,{})]})]})};!function(){var t=["background: radial-gradient(#D33106, #571402)","border: 1px solid #3E0E02","color: white","display: block","text-shadow: 0 1px 0 rgba(0, 0, 0, 0.3)","box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 5px 3px -5px rgba(0, 0, 0, 0.5), 0 -13px 5px -10px rgba(255, 255, 255, 0.4) inset","line-height: 40px","text-align: center","font-weight: bold","padding: 5px"].join(";");console.log("%c Thanks for applying to EOG!",t)}(),c.a.render(Object(z.jsx)(o.a,{children:Object(z.jsx)(tt,{})}),document.getElementById("root"))}},[[415,1,2]]]);
//# sourceMappingURL=main.967f73d3.chunk.js.map